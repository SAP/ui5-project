{
	"$schema": "http://json-schema.org/draft-07/schema",
	"$id": "http://ui5.sap/schema/specVersion/3.0/kind/project.json",

	"type": "object",
	"required": ["specVersion", "type"],
	"properties": {
		"specVersion": { "enum": ["3.0"] },
		"kind": {
			"enum": ["project", null],
			"$comment": "Using null to allow not defining 'kind' which defaults to project"
		},
		"type": {
			"enum": [
				"application",
				"library",
				"theme-library",
				"module"
			]
		}
	},
	"if": {
		"properties": {
			"type": {"const": null}
		},
		"$comment": "Using 'if' with null and empty 'then' to ensure no other schemas are applied when the property is not set. Otherwise the first 'if' condition might still be met, causing unexpected errors."
	},
	"then": {},
	"else": {
		"if": {
			"properties": {
				"type": {"const": "application"}
			}
		},
		"then": {
			"$ref": "project/application.json"
		},
		"else": {
			"if": {
				"properties": {
					"type": {"const": "library"}
				}
			},
			"then": {
				"$ref": "project/library.json"
			},
			"else": {
				"if": {
					"properties": {
						"type": {"const": "theme-library"}
					}
				},
				"then": {
					"$ref": "../../2.0/kind/project/theme-library.json"
				},
				"else": {
					"if": {
						"properties": {
							"type": {"const": "module"}
						}
					},
					"then": {
						"$ref": "../../2.0/kind/project/module.json"
					}
				}
			}
		}
	},

	"definitions": {
		"metadata": {
			"$ref": "../../2.0/kind/project.json#/definitions/metadata"
		},
		"builder-bundles": {
			"type": "array",
			"additionalProperties": false,
			"items": {
				"type": "object",
				"additionalProperties": false,
				"properties": {
					"bundleDefinition": {
						"type": "object",
						"additionalProperties": false,
						"required": ["name"],
						"properties": {
							"name": {
								"type": "string"
							},
							"defaultFileTypes": {
								"type": "array",
								"items": {
									"type": "string"
								}
							},
							"sections": {
								"type": "array",
								"items": {
									"type": "object",
									"additionalProperties": false,
									"required": ["mode", "filters"],
									"properties": {
										"name": {
											"type": "string"
										},
										"mode": {
											"enum": ["raw", "preload", "require", "provided", "bundleInfo"]
										},
										"filters": {
											"type": "array",
											"items": {
												"type": "string"
											}
										},
										"resolve": {
											"type": "boolean",
											"default": false
										},
										"resolveConditional": {
											"type": "boolean",
											"default": false
										},
										"renderer": {
											"type": "boolean",
											"default": false
										},
										"sort": {
											"type": "boolean",
											"default": true
										},
										"declareRawModules": {
											"type": "boolean",
											"default": false
										}
									}
								}
							}
						}
					},
					"bundleOptions": {
						"$ref": "#/definitions/builder-bundles-bundleOptions"
					}
				}
			}
		},
		"builder-bundles-bundleOptions": {
			"type": "object",
			"additionalProperties": false,
			"properties": {
				"optimize": {
					"type": "boolean",
					"default": true
				},
				"decorateBootstrapModule": {
					"type": "boolean",
					"default": true
				},
				"addTryCatchRestartWrapper": {
					"type": "boolean",
					"default": false
				},
				"usePredefineCalls": {
					"type": "boolean",
					"default": false
				},
				"numberOfParts": {
					"type": "number",
					"default": 1
				},
				"sourceMap": {
					"type": "boolean",
					"default": true
				}
			}
		}
	}
}
